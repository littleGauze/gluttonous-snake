!function(n){var t={};function e(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return n[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(o,i,function(t){return n[t]}.bind(null,i));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=4)}([function(n,t,e){var o=e(1);"string"==typeof o&&(o=[[n.i,o,""]]);var i={insert:"head",singleton:!1};e(3)(o,i);o.locals&&(n.exports=o.locals)},function(n,t,e){(n.exports=e(2)(!1)).push([n.i,":root {\n  --fg-1: #000;\n  --fg-2: #4acfef;\n  --fg-3: #caa2d2;\n}\n\nhtml, body { height: 100%; }\n\nbody {\n  overflow: hidden;\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: center;\n  align-items: center;\n  color: var(--fg-1);\n  background-color: white;\n  font-family: 'Courier New', Courier, monospace;\n}\n\ndiv.main {\n  width: 850px;\n}\n\naside {\n  float: left;\n  width: 200px;\n  height: 720px;\n  border: 1px solid var(--fg-1);\n}\n\nsection.playground {\n  margin-left: 220px;\n}\n\nsection div.chat {\n  overflow: hidden;\n  width: 600px;\n  margin-top: 20px;\n  border: 1px solid var(--fg-1);\n}\n\ndiv.chat-board {\n  height: 216px;\n  overflow-y: scroll;\n}\n\ndiv.chat-board ul {\n  margin: 0;\n  padding: 10px 20px;\n  list-style: none;\n  border-top: 1px solid var(--fg-1);\n}\n\ndiv.chat-board ul li {\n  position: relative;\n  margin-top: 25px;\n  font-size: 14px;\n  height: 20px;\n  line-height: 23px;\n}\n\ndiv.chat-board ul li span.nick {\n  font-weight: bold;\n}\n\ndiv.chat-board ul li span.time {\n  font-size: 12px;\n  display: block;\n  position: absolute;\n  left: 0;\n  top: -15px;\n  color: #666;\n}\n\ndiv.typer {\n  position: relative;\n  border-top: 1px solid var(--fg-1);\n}\n\ndiv.typer input {\n  width: 520px;\n  height: 30px;\n  margin: 0;\n  padding: 0;\n  border: none;\n  text-indent: 20px;\n  font-size: 14px;\n  -webkit-appearance: none;\n}\n\ndiv.typer input:focus {\n  outline: none;\n  box-shadow: 0 0 5px rgb(177, 135, 201) inset;\n}\n\ndiv.typer button {\n  width: 80px;\n  float: right;\n  height: 30px;\n  border: none;\n  border-left: 1px solid var(--fg-1);\n  font-size: 14px;\n  background-color: #eee;\n}\n\ndiv.typer button:focus {\n  outline: none;\n  box-shadow: 0 0 5px rgb(177, 135, 201) inset;\n}\n\nheader {\n  width: 600px;\n  height: 50px;\n  font-size: 14px;\n  border: 1px solid var(--fg-1);\n  border-bottom: none;\n}\n\naside > header {\n  width: 100%;\n  border: none;\n  text-align: center;\n  font-size: 20px;\n  font-weight: bold;\n  line-height: 50px;\n}\n\naside > ul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  border-top: 1px solid var(--fg-1);\n}\n\naside > ul li {\n  text-indent: 20px;\n  height: 35px;\n  line-height: 35px;\n  border-bottom: 1px solid #ddd;\n}\n\nheader > button, header > span, header > div {\n  margin: 8px 8px 0 8px;\n}\n\nheader > div:nth-child(1) {\n  display: block;        \n  float: right;\n  height: 50px;\n  margin: 0\n}\n\nheader button {\n  display: block;\n  margin: 10px;\n  height: 30px;\n  min-width: 50px;\n  font-weight: 300;\n  padding: 3px 9px;\n  margin-left: 4px;\n  font-size: 14px;\n  font-family: 'Courier New', Courier, monospace;\n  color: var(--fg-1);\n  background: none;\n  border: 1px solid var(--fg-1);\n  box-shadow: 2px 2px 1px  rgb(177, 135, 201);\n}\nheader span {\n  display: none;\n  line-height: 50px;\n  height: 50px;\n  font-size: 16px;\n  padding-right: 20px;\n}\n\nheader button:focus {\n  outline: none;\n}\n\nheader button:hover {\n  color: var(--fg-2);\n  border: 1px solid var(--fg-3);\n}\n\nheader button:active {\n  box-shadow: none;\n  margin: 9px 8px 0px 4px;\n  box-shadow: -1px -1px 1px  rgb(76, 61, 85);\n}\n\nheader p {\n  margin: 0;\n  display: block;\n}\n\nheader > span {\n  float: left;\n  clear: left;\n}\n\ncanvas {\n  display: block;\n  border: 1px solid var(--fg-1)\n}\n\n:not(button) { cursor: default; }\nbutton, a { cursor: pointer; }\n\na {\n  color: var(--fg-3);\n  text-decoration: none;\n  transition: 0.18s linear all;\n}\n\na:hover {\n  color: var(--fg-2);\n  letter-spacing: 1.1pt;\n  transition: 0.18s linear all;\n}\n\ndiv.modal {\n  display: none;\n  background-color: #fff;\n  z-index: 99;\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  margin-left: -150px;\n  margin-top: -100px;\n  border: 1px solid var(--fg-1);\n  width: 300px;\n  height: 200px;\n  box-shadow: 0 0 10px  rgb(177, 135, 201);\n}\n\ndiv.modal header {\n  width: 100%;\n  border: none;\n  border-bottom: 1px solid var(--fg-1);\n  font-size: 16px;\n  font-weight: bold;\n  text-align: center;\n  height: 30px;\n  line-height: 30px;\n}\n\ndiv.modal div.form {\n  height: 170px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\ndiv.form input {\n  height: 30px;\n  width: 200px;\n  text-indent: 10px;\n  font-size: 16px;\n  margin: 0;\n  padding: 0;\n}\n\ndiv.form input:focus {\n  outline: none;\n  box-shadow: 0 0 5px rgb(177, 135, 201) inset;\n}\n\ndiv.form button {\n  margin-top: 20px;\n  display: block;\n  width: 200px;\n  height: 30px;\n  font-weight: 300;\n  font-size: 14px;\n  font-family: 'Courier New', Courier, monospace;\n  color: var(--fg-1);\n  background: none;\n  border: 1px solid var(--fg-1);\n  box-shadow: 2px 2px 1px  rgb(177, 135, 201);\n}\n\ndiv.form button:focus {\n  outline: none;\n  box-shadow: 0 0 5px rgb(177, 135, 201) inset;\n}",""])},function(n,t,e){"use strict";n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var e=function(n,t){var e=n[1]||"",o=n[3];if(!o)return e;if(t&&"function"==typeof btoa){var i=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=o.sources.map(function(n){return"/*# sourceURL=".concat(o.sourceRoot).concat(n," */")});return[e].concat(r).concat([i]).join("\n")}var s,a,c;return[e].join("\n")}(t,n);return t[2]?"@media ".concat(t[2],"{").concat(e,"}"):e}).join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];null!=r&&(o[r]=!0)}for(var s=0;s<n.length;s++){var a=n[s];null!=a[0]&&o[a[0]]||(e&&!a[2]?a[2]=e:e&&(a[2]="(".concat(a[2],") and (").concat(e,")")),t.push(a))}},t}},function(n,t,e){"use strict";var o,i={},r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},s=function(){var n={};return function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}n[t]=e}return n[t]}}();function a(n,t){for(var e=[],o={},i=0;i<n.length;i++){var r=n[i],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):e.push(o[s]={id:s,parts:[a]})}return e}function c(n,t){for(var e=0;e<n.length;e++){var o=n[e],r=i[o.id],s=0;if(r){for(r.refs++;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(g(o.parts[s],t))}else{for(var a=[];s<o.parts.length;s++)a.push(g(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function l(n){var t=document.createElement("style");if(void 0===n.attributes.nonce){var o=e.nc;o&&(n.attributes.nonce=o)}if(Object.keys(n.attributes).forEach(function(e){t.setAttribute(e,n.attributes[e])}),"function"==typeof n.insert)n.insert(t);else{var i=s(n.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var d,u=(d=[],function(n,t){return d[n]=t,d.filter(Boolean).join("\n")});function p(n,t,e,o){var i=e?"":o.css;if(n.styleSheet)n.styleSheet.cssText=u(t,i);else{var r=document.createTextNode(i),s=n.childNodes;s[t]&&n.removeChild(s[t]),s.length?n.insertBefore(r,s[t]):n.appendChild(r)}}var h=null,f=0;function g(n,t){var e,o,i;if(t.singleton){var r=f++;e=h||(h=l(t)),o=p.bind(null,e,r,!1),i=p.bind(null,e,r,!0)}else e=l(t),o=function(n,t,e){var o=e.css,i=e.media,r=e.sourceMap;if(i&&n.setAttribute("media",i),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleSheet)n.styleSheet.cssText=o;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(o))}}.bind(null,e,t),i=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)};return o(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;o(n=t)}else i()}}n.exports=function(n,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r());var e=a(n,t);return c(e,t),function(n){for(var o=[],r=0;r<e.length;r++){var s=e[r],l=i[s.id];l&&(l.refs--,o.push(l))}n&&c(a(n,t),t);for(var d=0;d<o.length;d++){var u=o[d];if(0===u.refs){for(var p=0;p<u.parts.length;p++)u.parts[p]();delete i[u.id]}}}}},function(n,t,e){"use strict";e.r(t);var o,i,r,s,a,c;e(0);class l{static init(n){n.height=l.height,n.width=l.width,l.context=n.getContext("2d")}static fill(n){l.context.beginPath(),l.context.rect(0,0,l.width,l.height),l.context.fillStyle=n,l.context.fill()}static fillRect(n,t,e,o,i){l.context.beginPath(),l.context.fillStyle=i,l.context.fillRect(n,t,e,o)}static drawRect(n,t,e,o,i){l.context.beginPath(),l.context.lineWidth=1,l.context.strokeStyle=i,l.context.rect(n,t,e,o),l.context.stroke()}}l.width=600,l.height=400;class d{constructor(n,t){this.X=n,this.Y=t}static copy(n){return new d(n.X,n.Y)}}!function(n){n[n.UP=38]="UP",n[n.DOWN=40]="DOWN",n[n.LEFT=37]="LEFT",n[n.RIGHT=39]="RIGHT",n[n.SPACEBAR=32]="SPACEBAR",n[n.W=87]="W",n[n.S=83]="S",n[n.A=65]="A",n[n.D=68]="D"}(o||(o={})),function(n){n[n.NORTH=0]="NORTH",n[n.SOUTH=1]="SOUTH",n[n.EAST=2]="EAST",n[n.WEST=3]="WEST"}(i||(i={})),function(n){n[n.UP=0]="UP",n[n.DOWN=1]="DOWN",n[n.LEFT=2]="LEFT",n[n.RIGHT=3]="RIGHT",n[n.NONE=4]="NONE"}(r||(r={})),function(n){n[n.SLOW=0]="SLOW",n[n.FAST=1]="FAST",n[n.NORMAL=2]="NORMAL"}(s||(s={})),function(n){n[n.TIMED=0]="TIMED",n[n.INFINITE=1]="INFINITE"}(a||(a={})),function(n){n[n.EVEN=0]="EVEN",n[n.ODD=1]="ODD"}(c||(c={}));class u{static placeObject(n,t){u.grid[t.X][t.Y]=n,n.position=d.copy(t)}static removeObjectAt(n){n&&(u.grid[n.X][n.Y]=null)}static moveObject(n,t){u.removeObjectAt(n.position),u.placeObject(n,t)}static placeAtRandom(n){const t=u.generateRandomPosition();u.moveObject(n,t)}static generateRandomPosition(){let n;for(;!n;){const t=Math.floor(Math.random()*u.width),e=Math.floor(Math.random()*u.height);if(!u.grid[t][e]){n=new d(t,e);break}}return n}static init(){u.height=l.height/u.blockSize,u.width=l.width/u.blockSize,u.grid=new Array(u.width);for(let n=0,t=u.width;n!==t;n++)u.grid[n]=new Array(u.height)}static draw(){l.fill(u.bgColor);for(let n=0;n<u.width;n++)for(let t=0;t<u.height;t++)u.grid[n][t]&&u.grid[n][t].draw()}}u.bgColor="#fff",u.gridColor="#001F5C",u.blockSize=8,u.height=0,u.width=0;class p{static processInput(){if(p.lastKey&&k.player){switch(p.lastKey){case o.W:case o.UP:k.player.direction!==r.DOWN&&k.user.api.control({direction:r.UP});break;case o.S:case o.DOWN:k.player.direction!==r.UP&&k.user.api.control({direction:r.DOWN});break;case o.A:case o.LEFT:k.player.direction!==r.RIGHT&&k.user.api.control({direction:r.LEFT});break;case o.D:case o.RIGHT:k.player.direction!==r.LEFT&&k.user.api.control({direction:r.RIGHT});break;case o.SPACEBAR:k.user.api.control({skill:o.SPACEBAR})}p.lastKey=null}}}p.lastKey=null,p.onKeyUp=n=>{p.lastKey=n.keyCode};class h{static init(){h.buttons.join=document.querySelector("#join"),h.buttons.send=document.querySelector("#send"),h.buttons.modal=document.querySelector("#modal"),h.buttons.auth=document.querySelector("#auth"),h.username=document.querySelector("#name"),h.userField=document.querySelector("#user"),h.textInput=document.querySelector("#typeing"),h.msgList=document.querySelector("#msg-list"),h.rankingUl=document.querySelector("#ranking-ul");const n=()=>{const{display:n}=h.buttons.modal.style;h.buttons.modal.style.display="block"===n?"none":"block"};h.buttons.join.onclick=n,h.buttons.auth.onclick=()=>{const t=h.username.value;k.userAuth(t,e=>{h.buttons.join.style.display="none",h.userField.innerHTML=`Hi, ${t}`,h.userField.style.display="block",n(),k.user.setUser(e)})};const t=()=>{if(!k.user.getUser())return void n();const t=h.textInput.value.trim();t&&k.user.api.typer(t),h.textInput.value=""};h.textInput.onkeydown=n=>{13===n.keyCode&&t()},h.buttons.send.onclick=t}static loadChatMessage(n){const{name:t,msg:e,date:o}=n,i=document.createElement("li"),r=new Date(o),s=`<span class="nick">${t}:</span>\n                    ${e}\n                  <span class="time">${`${r.getFullYear()}-${r.getMonth()+1}-${r.getDate()} ${r.getHours()}:${r.getMinutes()}:${r.getSeconds()}`}</span>\n                  `;i.innerHTML=s,h.msgList.appendChild(i),h.msgList.parentElement.scrollTop=h.msgList.clientHeight}}h.buttons={join:null,send:null,modal:null,auth:null},h.username=null,h.textInput=null,h.userField=null,h.msgList=null,h.rankingUl=null,h.loadRankingList=function(n,t=1e3){let e=Date.now();return o=>{const i=Date.now();i-e>t&&(n(o),e=i)}}(n=>{let t="";n.forEach((n,e)=>{t+=`<li id='${n.token}'>\n        <strong>${e+1}.</strong> ${n.name} <span class='points' style='float: right; margin-right: 20px;'>${n.points}</span>\n      </li>`}),h.rankingUl.innerHTML=t});var f=n=>{return{userAuth(t){console.log("authentication ===> ",t);const e={Register:{Name:t}};n.send(JSON.stringify(e))},setUser(n){const t=JSON.stringify(n);window.localStorage.setItem("snake:user",t)},getUser:()=>JSON.parse(window.localStorage.getItem("snake:user")),removeUser(){window.localStorage.removeItem("snake:user"),window.location.reload()},api:{typer(t){n.send(JSON.stringify({ChatMsg:{msg:t}}))},control(t){n.send(JSON.stringify({GameControl:t}))}}}};class g{constructor({value:n}){this.value=n,this.index=g.coinsIndex,++g.coinsIndex,++g.coinsActive}static createRandom(){return new g({value:g.values[Math.floor(Math.random()*g.values.length)]})}handleCollision(n){n.points+=this.value,n.maxLength+=2,this.destroy()}draw(){if(!this.position)return;const n=this.position.X*u.blockSize+u.blockSize/2,t=this.position.Y*u.blockSize+u.blockSize/2,e=u.blockSize/2-1;l.context.beginPath(),l.context.arc(n,t,e,0,2*Math.PI,!1),l.context.strokeStyle="#FF0",l.context.fillStyle="#CC0",l.context.stroke(),l.context.fill()}destroy(){u.removeObjectAt(this.position),delete g.instances[this.index],--g.coinsActive}}g.values=[200,600,800,1e3,2e3],g.instances={},g.coinsIndex=0,g.coinsActive=0;class b{constructor(n){this.colorIndex=-1,this.position=n}draw(){const n=this.position.X*u.blockSize,t=this.position.Y*u.blockSize,e=u.blockSize;l.fillRect(n,t,e,e,this.getColor())}getColor(){const n=b.colors.length;return this.colorIndex++,b.colors[this.colorIndex%n]}handleCollision(n){n.die()}}b.colors=["#FF0000","#FF9966","#FFFA66","#66FF66","#66FFFD","#6699FF","#7966FF","#F366FF"];class x extends b{constructor({position:n,segments:t,speed:e,maxLength:o,direction:i,token:a,name:c,points:l}){super(n),this.jumpDistance=8,this.skipNextTurn=!1,this.hitDetected=!1,this.isAlive=!1,this.speed=s.SLOW,this.direction=r.NONE,this.hiScore=0,this.points=0,this.lives=999,this.segments=[],this.maxLength=x.defaultLength,this.segments[0]=this,this.isAlive=!0,this.name=c,this.maxLength=o,this.speed=e,this.direction=i,this.token=a,this.points=l,n&&(u.placeObject(this,n),t.length&&t.forEach(({position:n})=>{const t=new d(n.X,n.Y),e=new b(t);this.segments.push(e),u.placeObject(e,t)}))}jump(){const n=d.copy(this.position);switch(this.direction){case r.UP:n.Y-=this.jumpDistance;break;case r.DOWN:n.Y+=this.jumpDistance;break;case r.LEFT:n.X-=this.jumpDistance;break;case r.RIGHT:n.X+=this.jumpDistance;break;default:console.log("unknown direction ",this.direction)}this.updateBoard(n)}onHitScreenEdge(n){}die(){if(this.hitDetected=!0,this.hiScore=this.points>this.hiScore?this.points:this.hiScore,k.hiScore=this.hiScore>k.hiScore?this.hiScore:k.hiScore,!this.lives)return this.isAlive=!1,void k.reset();--this.lives,this.destroy(),this.position=new d(0,0),this.direction=r.NONE}setSpeed(n){this.speed=n,this.skipNextTurn=n===s.SLOW}processTurn(){if(!this.isAlive)return;const n=d.copy(this.position);this.updateBoard(n)}updateBoard(n){}destroy(){for(let n=0,t=this.segments.length;n!==t;n++)u.removeObjectAt(this.segments[n].position);this.segments=[this],this.maxLength=this.maxLength}}x.defaultLength=3;class m{constructor({speed:n}){this.speed=n,this.color=m.colors[this.speed],this.index=m.itemsIndex,++m.itemsIndex,++m.itemsActive}handleCollision(n){n.setSpeed(this.speed),this.destroy()}draw(){if(!this.position)return;const n=this.position.X*u.blockSize+2,t=this.position.Y*u.blockSize+2,e=u.blockSize-4;l.drawRect(n,t,e,e,this.color)}destroy(){u.removeObjectAt(this.position),delete m.instances[this.index],--m.itemsActive}}m.colors=["#3366FF","#FF1400"],m.instances={},m.itemsIndex=0,m.itemsActive=0,e.d(t,"default",function(){return k});var v,y=function(n,t){var e={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(n);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(e[o[i]]=n[o[i]])}return e};!function(n){n[n.EASY=300]="EASY",n[n.MEDIUM=150]="MEDIUM",n[n.DIFFICULT=50]="DIFFICULT"}(v||(v={}));let S="ws://localhost:3653";S="ws://localhost:3653",console.log("env ","production",S);const w=n=>{return n.map(n=>({token:n.token,name:n.name,points:n.points})).sort((n,t)=>t.points-n.points)};class k{static init(){l.init(document.querySelector("canvas")),document.querySelector("body").onkeyup=p.onKeyUp;const n=new WebSocket(S);k.syncChannel=n,n.onopen=function(){k.user=f(n),k.ready()},n.onclose=function(){k.user&&k.user.removeUser()},n.onmessage=function(n){let t;const e=new FileReader;e.readAsText(n.data),e.onload=function(){switch(t=JSON.parse(this.result),!0){case!!t.RegisterResp:null!=k.authCallback&&k.authCallback(t.RegisterResp.data);break;case!!t.DataSync:k.loadData(t.DataSync.dataMap),k.onClockTick();break;case!!t.ChatMsg:h.loadChatMessage(t.ChatMsg)}}}}static loadData(n){n=JSON.parse(`[${n.slice(0,-1)}]`),u.init(),k.players=[];const t=n.filter(n=>"SnakeSegment"===n.clazz);(n=n.filter(n=>"SnakeSegment"!==n.clazz)).forEach(n=>{const{clazz:e}=n,o=y(n,["clazz"]),i={Coin:g,Snake:x,SpeedCoin:m}[e];if(!i)return;i===x&&(o.segments=t);const r=new i(o);"Snake"===e&&(k.players.push(r),k.player=r),u.placeObject(r,o.position)}),h.loadRankingList(w(k.players))}static userAuth(n,t){k.user.userAuth(n),k.authCallback=t}static createUserChannel(n){console.log(n)}static ready(){u.init(),u.draw(),h.init()}static start(){k.isRunning||(k.clock.isPaused?k.pause():(k.isRunning=!0,k.clock.start()))}static pause(){if(k.clock.isPaused)return k.isRunning=!0,void k.clock.resume();k.clock.pause(),k.isRunning=!1}static reset(){k.isRunning=!1,k.ready()}static onClockTick(){p.processInput(),k.players.forEach(n=>n.processTurn()),u.draw()}}k.hiScore=0,k.isRunning=!1,k.coinCounter=0,k.players=[],k.init()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9jc3Mvc3R5bGUuY3NzP2JhMzIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Fzc2V0cy9jc3Mvc3R5bGUuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy90eXBlcy9lbnVtcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHlwZXMvdGltZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V4L2NhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHlwZXMvcG9zaXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V4L2JvYXJkLnRzIiwid2VicGFjazovLy8uL3NyYy91eC9jb250cm9scy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXgvZ3VpLnRzIiwid2VicGFjazovLy8uL3NyYy91eC91c2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9vYmplY3RzL2NvaW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29iamVjdHMvc25ha2VTZWdtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9vYmplY3RzL3NuYWtlLnRzIiwid2VicGFjazovLy8uL3NyYy9vYmplY3RzL3NwZWVkQ29pbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvbnRlbnQiLCJvcHRpb25zIiwibG9jYWxzIiwicHVzaCIsInVzZVNvdXJjZU1hcCIsImxpc3QiLCJ0b1N0cmluZyIsInRoaXMiLCJtYXAiLCJpdGVtIiwiY3NzTWFwcGluZyIsImJ0b2EiLCJzb3VyY2VNYXBwaW5nIiwic291cmNlTWFwIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImNvbmNhdCIsInNvdXJjZVVSTHMiLCJzb3VyY2VzIiwic291cmNlIiwic291cmNlUm9vdCIsImpvaW4iLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJsZW5ndGgiLCJpZCIsIl9pIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIkJvb2xlYW4iLCJ3aW5kb3ciLCJkb2N1bWVudCIsImFsbCIsImF0b2IiLCJnZXRUYXJnZXQiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsInF1ZXJ5U2VsZWN0b3IiLCJIVE1MSUZyYW1lRWxlbWVudCIsImNvbnRlbnREb2N1bWVudCIsImhlYWQiLCJlIiwibGlzdFRvU3R5bGVzIiwic3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInBhcnRzIiwiYWRkU3R5bGVzVG9Eb20iLCJkb21TdHlsZSIsImoiLCJyZWZzIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsIkVycm9yIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0U3RvcmUiLCJyZXBsYWNlVGV4dCIsImluZGV4IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwicmVtb3ZlIiwib2JqIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwidXBkYXRlIiwic3R5bGVJbmRleCIsImZpcnN0Q2hpbGQiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsIl9kb21TdHlsZSIsIkdhbWVLZXkiLCJTY3JlZW5FZGdlIiwiRGlyZWN0aW9uIiwiU3BlZWQiLCJDbG9ja1R5cGUiLCJDbG9ja1RpY2siLCJDYW52YXMiLCJlbCIsImhlaWdodCIsIndpZHRoIiwiY29udGV4dCIsImdldENvbnRleHQiLCJjb2xvciIsImJlZ2luUGF0aCIsInJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsIiwieCIsInkiLCJ3IiwiaCIsImZpbGxSZWN0IiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJzdHJva2UiLCJQb3NpdGlvbiIsIlgiLCJZIiwicG9zaXRpb24iLCJncmlkIiwiY29weSIsIm5ld1Bvc2l0aW9uIiwicmVtb3ZlT2JqZWN0QXQiLCJwbGFjZU9iamVjdCIsImdlbmVyYXRlUmFuZG9tUG9zaXRpb24iLCJtb3ZlT2JqZWN0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYmxvY2tTaXplIiwiQXJyYXkiLCJiZ0NvbG9yIiwiY3giLCJjeSIsImRyYXciLCJncmlkQ29sb3IiLCJsYXN0S2V5IiwicGxheWVyIiwiVyIsIlVQIiwiZGlyZWN0aW9uIiwiRE9XTiIsInVzZXIiLCJhcGkiLCJjb250cm9sIiwiUyIsIkEiLCJMRUZUIiwiUklHSFQiLCJEIiwiU1BBQ0VCQVIiLCJza2lsbCIsIm9uS2V5VXAiLCJldiIsImtleUNvZGUiLCJidXR0b25zIiwic2VuZCIsIm1vZGFsIiwiYXV0aCIsInVzZXJuYW1lIiwidXNlckZpZWxkIiwidGV4dElucHV0IiwibXNnTGlzdCIsInJhbmtpbmdVbCIsInRvZ2dsZSIsImRpc3BsYXkiLCJvbmNsaWNrIiwidXNlckF1dGgiLCJpbm5lckhUTUwiLCJzZXRVc2VyIiwic2VuZE1zZyIsImdldFVzZXIiLCJ0ZXh0IiwidHJpbSIsInR5cGVyIiwib25rZXlkb3duIiwiZXZ0IiwibXNnIiwiZGF0ZSIsImxpIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInBhcmVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJjbGllbnRIZWlnaHQiLCJsb2FkUmFua2luZ0xpc3QiLCJoYW5kbGUiLCJpbnRlcnZhbCIsImxhc3RTeW5jQXQiLCJub3ciLCJ0aHJvdHRsZSIsInNlZ21lbnRzIiwiaXQiLCJpZHgiLCJ0b2tlbiIsInBvaW50cyIsImNoYW5uZWwiLCJjb25zb2xlIiwibG9nIiwicmVnIiwiUmVnaXN0ZXIiLCJOYW1lIiwidSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJwYXJzZSIsImdldEl0ZW0iLCJyZW1vdmVJdGVtIiwibG9jYXRpb24iLCJyZWxvYWQiLCJDaGF0TXNnIiwib3AiLCJHYW1lQ29udHJvbCIsImNvaW5zSW5kZXgiLCJjb2luc0FjdGl2ZSIsInZhbHVlcyIsInNuYWtlIiwibWF4TGVuZ3RoIiwiZGVzdHJveSIsImFyYyIsIlBJIiwiaW5zdGFuY2VzIiwiY29sb3JJbmRleCIsInN4Iiwic3kiLCJzaXplIiwiZ2V0Q29sb3IiLCJsZW4iLCJjb2xvcnMiLCJkaWUiLCJzcGVlZCIsInN1cGVyIiwianVtcERpc3RhbmNlIiwic2tpcE5leHRUdXJuIiwiaGl0RGV0ZWN0ZWQiLCJpc0FsaXZlIiwiU0xPVyIsIk5PTkUiLCJoaVNjb3JlIiwibGl2ZXMiLCJkZWZhdWx0TGVuZ3RoIiwicG9zIiwibmV3UG9zIiwibmV3U2VnbWVudCIsInVwZGF0ZUJvYXJkIiwiZWRnZSIsInJlc2V0IiwiaXRlbXNJbmRleCIsIml0ZW1zQWN0aXZlIiwic2V0U3BlZWQiLCJkcmF3UmVjdCIsIkdhbWVEaWZmaWN1bHR5IiwiYWRkcmVzcyIsInJhbmtpbmdMaXN0IiwicGxheWVycyIsInNvcnQiLCJhIiwiYiIsImluaXQiLCJvbmtleXVwIiwid3MiLCJXZWJTb2NrZXQiLCJzeW5jQ2hhbm5lbCIsIm9ub3BlbiIsInJlYWR5Iiwib25jbG9zZSIsInJlbW92ZVVzZXIiLCJvbm1lc3NhZ2UiLCJmaWxlIiwiRmlsZVJlYWRlciIsInJlYWRBc1RleHQiLCJvbmxvYWQiLCJyZXN1bHQiLCJSZWdpc3RlclJlc3AiLCJhdXRoQ2FsbGJhY2siLCJEYXRhU3luYyIsImxvYWREYXRhIiwiZGF0YU1hcCIsIm9uQ2xvY2tUaWNrIiwibG9hZENoYXRNZXNzYWdlIiwic2xpY2UiLCJjbGF6eiIsIkVsZW0iLCJDb2luIiwiU25ha2UiLCJTcGVlZENvaW4iLCJwYXJhbXMiLCJjYWxsYmFjayIsImlzUnVubmluZyIsImNsb2NrIiwiaXNQYXVzZWQiLCJwYXVzZSIsInN0YXJ0IiwicmVzdW1lIiwicHJvY2Vzc0lucHV0IiwicHJvY2Vzc1R1cm4iLCJjb2luQ291bnRlciJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxF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ciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsInZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIik7XG5cbmlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xufVxuXG52YXIgb3B0aW9ucyA9IHt9XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmIChjb250ZW50LmxvY2Fscykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xufVxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCI6cm9vdCB7XFxuICAtLWZnLTE6ICMwMDA7XFxuICAtLWZnLTI6ICM0YWNmZWY7XFxuICAtLWZnLTM6ICNjYWEyZDI7XFxufVxcblxcbmh0bWwsIGJvZHkgeyBoZWlnaHQ6IDEwMCU7IH1cXG5cXG5ib2R5IHtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1mbG93OiBjb2x1bW4gbm93cmFwO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgY29sb3I6IHZhcigtLWZnLTEpO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XFxuICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlO1xcbn1cXG5cXG5kaXYubWFpbiB7XFxuICB3aWR0aDogODUwcHg7XFxufVxcblxcbmFzaWRlIHtcXG4gIGZsb2F0OiBsZWZ0O1xcbiAgd2lkdGg6IDIwMHB4O1xcbiAgaGVpZ2h0OiA3MjBweDtcXG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWZnLTEpO1xcbn1cXG5cXG5zZWN0aW9uLnBsYXlncm91bmQge1xcbiAgbWFyZ2luLWxlZnQ6IDIyMHB4O1xcbn1cXG5cXG5zZWN0aW9uIGRpdi5jaGF0IHtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICB3aWR0aDogNjAwcHg7XFxuICBtYXJnaW4tdG9wOiAyMHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZmctMSk7XFxufVxcblxcbmRpdi5jaGF0LWJvYXJkIHtcXG4gIGhlaWdodDogMjE2cHg7XFxuICBvdmVyZmxvdy15OiBzY3JvbGw7XFxufVxcblxcbmRpdi5jaGF0LWJvYXJkIHVsIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZmctMSk7XFxufVxcblxcbmRpdi5jaGF0LWJvYXJkIHVsIGxpIHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIG1hcmdpbi10b3A6IDI1cHg7XFxuICBmb250LXNpemU6IDE0cHg7XFxuICBoZWlnaHQ6IDIwcHg7XFxuICBsaW5lLWhlaWdodDogMjNweDtcXG59XFxuXFxuZGl2LmNoYXQtYm9hcmQgdWwgbGkgc3Bhbi5uaWNrIHtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG5kaXYuY2hhdC1ib2FyZCB1bCBsaSBzcGFuLnRpbWUge1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAtMTVweDtcXG4gIGNvbG9yOiAjNjY2O1xcbn1cXG5cXG5kaXYudHlwZXIge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWZnLTEpO1xcbn1cXG5cXG5kaXYudHlwZXIgaW5wdXQge1xcbiAgd2lkdGg6IDUyMHB4O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIHRleHQtaW5kZW50OiAyMHB4O1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xcbn1cXG5cXG5kaXYudHlwZXIgaW5wdXQ6Zm9jdXMge1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggcmdiKDE3NywgMTM1LCAyMDEpIGluc2V0O1xcbn1cXG5cXG5kaXYudHlwZXIgYnV0dG9uIHtcXG4gIHdpZHRoOiA4MHB4O1xcbiAgZmxvYXQ6IHJpZ2h0O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB2YXIoLS1mZy0xKTtcXG4gIGZvbnQtc2l6ZTogMTRweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XFxufVxcblxcbmRpdi50eXBlciBidXR0b246Zm9jdXMge1xcbiAgb3V0bGluZTogbm9uZTtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggcmdiKDE3NywgMTM1LCAyMDEpIGluc2V0O1xcbn1cXG5cXG5oZWFkZXIge1xcbiAgd2lkdGg6IDYwMHB4O1xcbiAgaGVpZ2h0OiA1MHB4O1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZmctMSk7XFxuICBib3JkZXItYm90dG9tOiBub25lO1xcbn1cXG5cXG5hc2lkZSA+IGhlYWRlciB7XFxuICB3aWR0aDogMTAwJTtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIGZvbnQtc2l6ZTogMjBweDtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgbGluZS1oZWlnaHQ6IDUwcHg7XFxufVxcblxcbmFzaWRlID4gdWwge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7XFxuICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZmctMSk7XFxufVxcblxcbmFzaWRlID4gdWwgbGkge1xcbiAgdGV4dC1pbmRlbnQ6IDIwcHg7XFxuICBoZWlnaHQ6IDM1cHg7XFxuICBsaW5lLWhlaWdodDogMzVweDtcXG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xcbn1cXG5cXG5oZWFkZXIgPiBidXR0b24sIGhlYWRlciA+IHNwYW4sIGhlYWRlciA+IGRpdiB7XFxuICBtYXJnaW46IDhweCA4cHggMCA4cHg7XFxufVxcblxcbmhlYWRlciA+IGRpdjpudGgtY2hpbGQoMSkge1xcbiAgZGlzcGxheTogYmxvY2s7ICAgICAgICBcXG4gIGZsb2F0OiByaWdodDtcXG4gIGhlaWdodDogNTBweDtcXG4gIG1hcmdpbjogMFxcbn1cXG5cXG5oZWFkZXIgYnV0dG9uIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbWFyZ2luOiAxMHB4O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgbWluLXdpZHRoOiA1MHB4O1xcbiAgZm9udC13ZWlnaHQ6IDMwMDtcXG4gIHBhZGRpbmc6IDNweCA5cHg7XFxuICBtYXJnaW4tbGVmdDogNHB4O1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZTtcXG4gIGNvbG9yOiB2YXIoLS1mZy0xKTtcXG4gIGJhY2tncm91bmQ6IG5vbmU7XFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1mZy0xKTtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICByZ2IoMTc3LCAxMzUsIDIwMSk7XFxufVxcbmhlYWRlciBzcGFuIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBsaW5lLWhlaWdodDogNTBweDtcXG4gIGhlaWdodDogNTBweDtcXG4gIGZvbnQtc2l6ZTogMTZweDtcXG4gIHBhZGRpbmctcmlnaHQ6IDIwcHg7XFxufVxcblxcbmhlYWRlciBidXR0b246Zm9jdXMge1xcbiAgb3V0bGluZTogbm9uZTtcXG59XFxuXFxuaGVhZGVyIGJ1dHRvbjpob3ZlciB7XFxuICBjb2xvcjogdmFyKC0tZmctMik7XFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1mZy0zKTtcXG59XFxuXFxuaGVhZGVyIGJ1dHRvbjphY3RpdmUge1xcbiAgYm94LXNoYWRvdzogbm9uZTtcXG4gIG1hcmdpbjogOXB4IDhweCAwcHggNHB4O1xcbiAgYm94LXNoYWRvdzogLTFweCAtMXB4IDFweCAgcmdiKDc2LCA2MSwgODUpO1xcbn1cXG5cXG5oZWFkZXIgcCB7XFxuICBtYXJnaW46IDA7XFxuICBkaXNwbGF5OiBibG9jaztcXG59XFxuXFxuaGVhZGVyID4gc3BhbiB7XFxuICBmbG9hdDogbGVmdDtcXG4gIGNsZWFyOiBsZWZ0O1xcbn1cXG5cXG5jYW52YXMge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1mZy0xKVxcbn1cXG5cXG46bm90KGJ1dHRvbikgeyBjdXJzb3I6IGRlZmF1bHQ7IH1cXG5idXR0b24sIGEgeyBjdXJzb3I6IHBvaW50ZXI7IH1cXG5cXG5hIHtcXG4gIGNvbG9yOiB2YXIoLS1mZy0zKTtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG4gIHRyYW5zaXRpb246IDAuMThzIGxpbmVhciBhbGw7XFxufVxcblxcbmE6aG92ZXIge1xcbiAgY29sb3I6IHZhcigtLWZnLTIpO1xcbiAgbGV0dGVyLXNwYWNpbmc6IDEuMXB0O1xcbiAgdHJhbnNpdGlvbjogMC4xOHMgbGluZWFyIGFsbDtcXG59XFxuXFxuZGl2Lm1vZGFsIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbiAgei1pbmRleDogOTk7XFxuICBwb3NpdGlvbjogZml4ZWQ7XFxuICB0b3A6IDUwJTtcXG4gIGxlZnQ6IDUwJTtcXG4gIG1hcmdpbi1sZWZ0OiAtMTUwcHg7XFxuICBtYXJnaW4tdG9wOiAtMTAwcHg7XFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1mZy0xKTtcXG4gIHdpZHRoOiAzMDBweDtcXG4gIGhlaWdodDogMjAwcHg7XFxuICBib3gtc2hhZG93OiAwIDAgMTBweCAgcmdiKDE3NywgMTM1LCAyMDEpO1xcbn1cXG5cXG5kaXYubW9kYWwgaGVhZGVyIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgYm9yZGVyOiBub25lO1xcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWZnLTEpO1xcbiAgZm9udC1zaXplOiAxNnB4O1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICBoZWlnaHQ6IDMwcHg7XFxuICBsaW5lLWhlaWdodDogMzBweDtcXG59XFxuXFxuZGl2Lm1vZGFsIGRpdi5mb3JtIHtcXG4gIGhlaWdodDogMTcwcHg7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG59XFxuXFxuZGl2LmZvcm0gaW5wdXQge1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgd2lkdGg6IDIwMHB4O1xcbiAgdGV4dC1pbmRlbnQ6IDEwcHg7XFxuICBmb250LXNpemU6IDE2cHg7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbn1cXG5cXG5kaXYuZm9ybSBpbnB1dDpmb2N1cyB7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgYm94LXNoYWRvdzogMCAwIDVweCByZ2IoMTc3LCAxMzUsIDIwMSkgaW5zZXQ7XFxufVxcblxcbmRpdi5mb3JtIGJ1dHRvbiB7XFxuICBtYXJnaW4tdG9wOiAyMHB4O1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICB3aWR0aDogMjAwcHg7XFxuICBoZWlnaHQ6IDMwcHg7XFxuICBmb250LXdlaWdodDogMzAwO1xcbiAgZm9udC1zaXplOiAxNHB4O1xcbiAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZTtcXG4gIGNvbG9yOiB2YXIoLS1mZy0xKTtcXG4gIGJhY2tncm91bmQ6IG5vbmU7XFxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1mZy0xKTtcXG4gIGJveC1zaGFkb3c6IDJweCAycHggMXB4ICByZ2IoMTc3LCAxMzUsIDIwMSk7XFxufVxcblxcbmRpdi5mb3JtIGJ1dHRvbjpmb2N1cyB7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgYm94LXNoYWRvdzogMCAwIDVweCByZ2IoMTc3LCAxMzUsIDIwMSkgaW5zZXQ7XFxufVwiLCBcIlwiXSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIntcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gbW9kdWxlc1tfaV07IC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcbiAgICAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG4gICAgICAvLyB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG4gICAgICAvLyBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cbiAgICAgIGlmIChpdGVtWzBdID09IG51bGwgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgaWYgKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiKFwiLmNvbmNhdChpdGVtWzJdLCBcIikgYW5kIChcIikuY29uY2F0KG1lZGlhUXVlcnksIFwiKVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290KS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZXMgPSBbXTtcbiAgdmFyIG5ld1N0eWxlcyA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY3NzID0gaXRlbVsxXTtcbiAgICB2YXIgbWVkaWEgPSBpdGVtWzJdO1xuICAgIHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuICAgIHZhciBwYXJ0ID0ge1xuICAgICAgY3NzOiBjc3MsXG4gICAgICBtZWRpYTogbWVkaWEsXG4gICAgICBzb3VyY2VNYXA6IHNvdXJjZU1hcFxuICAgIH07XG5cbiAgICBpZiAoIW5ld1N0eWxlc1tpZF0pIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgcGFydHM6IFtwYXJ0XVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcbiAgICB2YXIgaiA9IDA7XG5cbiAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgIGRvbVN0eWxlLnJlZnMrKztcblxuICAgICAgZm9yICg7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcbiAgICAgIH1cblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuXG4gICAgICBzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHJlZnM6IDEsXG4gICAgICAgIHBhcnRzOiBwYXJ0c1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhvcHRpb25zLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIG9wdGlvbnMuYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmF0dHJpYnV0ZXMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuYXR0cmlidXRlcyA6IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG4gIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIHZhciBtYXlSZW1vdmUgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG4gICAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgICAgZG9tU3R5bGUucmVmcy0tO1xuICAgICAgICBtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld0xpc3QpIHtcbiAgICAgIHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgICBhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtYXlSZW1vdmUubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2RvbVN0eWxlID0gbWF5UmVtb3ZlW19pXTtcblxuICAgICAgaWYgKF9kb21TdHlsZS5yZWZzID09PSAwKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX2RvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgX2RvbVN0eWxlLnBhcnRzW2pdKCk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc3R5bGVzSW5Eb21bX2RvbVN0eWxlLmlkXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59OyIsImV4cG9ydCBlbnVtIEdhbWVLZXkge1xuICBVUCA9IDM4LFxuICBET1dOID0gNDAsXG4gIExFRlQgPSAzNyxcbiAgUklHSFQgPSAzOSxcbiAgU1BBQ0VCQVIgPSAzMixcbiAgVyA9IDg3LFxuICBTID0gODMsXG4gIEEgPSA2NSxcbiAgRCA9IDY4XG59XG5cbmV4cG9ydCBlbnVtIFNjcmVlbkVkZ2Uge1xuICBOT1JUSCxcbiAgU09VVEgsXG4gIEVBU1QsXG4gIFdFU1Rcbn1cblxuZXhwb3J0IGVudW0gRGlyZWN0aW9uIHtcbiAgVVAsXG4gIERPV04sXG4gIExFRlQsXG4gIFJJR0hULFxuICBOT05FXG59XG5cbmV4cG9ydCBlbnVtIFNwZWVkIHtcbiAgU0xPVyxcbiAgRkFTVCxcbiAgTk9STUFMXG59XG4iLCJleHBvcnQgZW51bSBDbG9ja1R5cGUgeyBUSU1FRCwgSU5GSU5JVEUgfVxuXG5leHBvcnQgZW51bSBDbG9ja1RpY2sgeyBFVkVOLCBPREQgfVxuXG5leHBvcnQgY2xhc3MgVGltZXIge1xuICBwcml2YXRlIGhhbmRsZTogbnVtYmVyXG4gIHByaXZhdGUgaW50ZXJ2YWw6IG51bWJlclxuXG4gIHB1YmxpYyB0eXBlOiBDbG9ja1R5cGVcbiAgcHVibGljIHRpY2s6IENsb2NrVGljayA9IENsb2NrVGljay5FVkVOXG4gIHB1YmxpYyBpc1J1bm5pbmc6IGJvb2xlYW5cbiAgcHVibGljIGlzUGF1c2VkOiBib29sZWFuXG5cbiAgY29uc3RydWN0b3IoaW50ZXJ2YWw6IG51bWJlciwgZHVyYXRpb246IG51bWJlciwgaGFuZGxlcjogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBpbnRlcnZhbFxuICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXJcbiAgICB0aGlzLnR5cGUgPSAoZHVyYXRpb24gPT09IDApID8gQ2xvY2tUeXBlLklORklOSVRFIDogQ2xvY2tUeXBlLlRJTUVEXG4gIH1cblxuICBwdWJsaWMgaGFuZGxlcjogKCkgPT4gdm9pZCA9ICgpID0+IHsgY29uc29sZS5sb2coJ05vIGNsb2NrIGV2ZW50JykgfVxuXG4gIHB1YmxpYyBvbkVsYXBzZWQgPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHJldHVyblxuXG4gICAgdGhpcy50aWNrID0gKHRoaXMudGljayA9PT0gQ2xvY2tUaWNrLkVWRU4pID8gQ2xvY2tUaWNrLk9ERCA6IENsb2NrVGljay5FVkVOXG4gICAgdGhpcy5oYW5kbGVyKClcblxuICAgIGlmICh0aGlzLnR5cGUgPT09IENsb2NrVHlwZS5USU1FRCkge1xuICAgICAgdGhpcy5zdG9wKClcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlXG4gICAgdGhpcy5oYW5kbGUgPSAodGhpcy50eXBlID09PSBDbG9ja1R5cGUuSU5GSU5JVEUpXG4gICAgICA/IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLm9uRWxhcHNlZC5iaW5kKHRoaXMpLCB0aGlzLmludGVydmFsKVxuICAgICAgOiB3aW5kb3cuc2V0VGltZW91dCh0aGlzLm9uRWxhcHNlZC5iaW5kKHRoaXMpLCB0aGlzLmludGVydmFsKVxuICB9XG5cbiAgcHVibGljIHN0b3AoKTogdm9pZCB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZVxuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IENsb2NrVHlwZS5JTkZJTklURVxuICAgICAgPyB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmhhbmRsZSlcbiAgICAgIDogd2luZG93LmNsZWFyVGltZW91dCh0aGlzLmhhbmRsZSlcbiAgfVxuXG4gIHB1YmxpYyBwYXVzZSgpOiB2b2lkIHsgdGhpcy5pc1BhdXNlZCA9IHRydWUgfVxuXG4gIHB1YmxpYyByZXN1bWUoKTogdm9pZCB7IHRoaXMuaXNQYXVzZWQgPSBmYWxzZSB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBDYW52YXMge1xuICBwdWJsaWMgc3RhdGljIHdpZHRoOiBudW1iZXIgPSA2MDBcbiAgcHVibGljIHN0YXRpYyBoZWlnaHQ6IG51bWJlciA9IDQwMFxuICBwdWJsaWMgc3RhdGljIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFxuXG4gIHB1YmxpYyBzdGF0aWMgaW5pdChlbDogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcbiAgICBlbC5oZWlnaHQgPSBDYW52YXMuaGVpZ2h0XG4gICAgZWwud2lkdGggPSBDYW52YXMud2lkdGhcbiAgICBDYW52YXMuY29udGV4dCA9IGVsLmdldENvbnRleHQoJzJkJylcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZmlsbChjb2xvcjogc3RyaW5nKTogdm9pZCB7XG4gICAgQ2FudmFzLmNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBDYW52YXMuY29udGV4dC5yZWN0KDAsIDAsIENhbnZhcy53aWR0aCwgQ2FudmFzLmhlaWdodClcbiAgICBDYW52YXMuY29udGV4dC5maWxsU3R5bGUgPSBjb2xvclxuICAgIENhbnZhcy5jb250ZXh0LmZpbGwoKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBmaWxsUmVjdCh4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBDYW52YXMuY29udGV4dC5iZWdpblBhdGgoKVxuICAgIENhbnZhcy5jb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yXG4gICAgQ2FudmFzLmNvbnRleHQuZmlsbFJlY3QoeCwgeSwgdywgaClcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZHJhd1JlY3QoeDogbnVtYmVyLCB5OiBudW1iZXIsIHc6IG51bWJlciwgaDogbnVtYmVyLCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XG4gICAgQ2FudmFzLmNvbnRleHQuYmVnaW5QYXRoKClcbiAgICBDYW52YXMuY29udGV4dC5saW5lV2lkdGggPSAxXG4gICAgQ2FudmFzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvclxuICAgIENhbnZhcy5jb250ZXh0LnJlY3QoeCwgeSwgdywgaClcbiAgICBDYW52YXMuY29udGV4dC5zdHJva2UoKVxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUG9zaXRpb24ge1xuICBYOiBudW1iZXJcbiAgWTogbnVtYmVyXG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgdGhpcy5YID0geFxuICAgIHRoaXMuWSA9IHlcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgY29weShwb3NpdGlvbjogUG9zaXRpb24pOiBQb3NpdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBQb3NpdGlvbihwb3NpdGlvbi5YLCBwb3NpdGlvbi5ZKVxuICB9XG59XG4iLCJpbXBvcnQgeyBEcmF3YWJsZSwgUG9zaXRpb24gfSBmcm9tICcuLi90eXBlcy9pbmRleCdcbmltcG9ydCBDYW52YXMgZnJvbSAnLi9jYW52YXMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvYXJkIHtcbiAgcHVibGljIHN0YXRpYyBiZ0NvbG9yOiBzdHJpbmcgPSAnI2ZmZidcbiAgcHVibGljIHN0YXRpYyBncmlkQ29sb3I6IHN0cmluZyA9ICcjMDAxRjVDJ1xuXG4gIHB1YmxpYyBzdGF0aWMgYmxvY2tTaXplID0gOFxuICBwdWJsaWMgc3RhdGljIGhlaWdodCA9IDBcbiAgcHVibGljIHN0YXRpYyB3aWR0aCA9IDBcblxuICBwdWJsaWMgc3RhdGljIGdyaWQ6IERyYXdhYmxlW11bXVxuXG4gIHB1YmxpYyBzdGF0aWMgcGxhY2VPYmplY3Qob2JqZWN0OiBEcmF3YWJsZSwgcG9zaXRpb246IFBvc2l0aW9uKTogdm9pZCB7XG4gICAgQm9hcmQuZ3JpZFtwb3NpdGlvbi5YXVtwb3NpdGlvbi5ZXSA9IG9iamVjdFxuICAgIG9iamVjdC5wb3NpdGlvbiA9IFBvc2l0aW9uLmNvcHkocG9zaXRpb24pXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHJlbW92ZU9iamVjdEF0KHBvc2l0aW9uOiBQb3NpdGlvbik6IHZvaWQge1xuICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgQm9hcmQuZ3JpZFtwb3NpdGlvbi5YXVtwb3NpdGlvbi5ZXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIG1vdmVPYmplY3Qob2JqZWN0OiBEcmF3YWJsZSwgbmV3UG9zaXRpb246IFBvc2l0aW9uKTogdm9pZCB7XG4gICAgQm9hcmQucmVtb3ZlT2JqZWN0QXQob2JqZWN0LnBvc2l0aW9uKVxuICAgIEJvYXJkLnBsYWNlT2JqZWN0KG9iamVjdCwgbmV3UG9zaXRpb24pXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHBsYWNlQXRSYW5kb20ob2JqZWN0OiBEcmF3YWJsZSk6IHZvaWQge1xuICAgIGNvbnN0IHBvc2l0aW9uID0gQm9hcmQuZ2VuZXJhdGVSYW5kb21Qb3NpdGlvbigpXG4gICAgQm9hcmQubW92ZU9iamVjdChvYmplY3QsIHBvc2l0aW9uKVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbVBvc2l0aW9uKCk6IFBvc2l0aW9uIHtcbiAgICBsZXQgcG9zaXRpb246IFBvc2l0aW9uXG4gICAgd2hpbGUgKCFwb3NpdGlvbikge1xuICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJvYXJkLndpZHRoKVxuICAgICAgY29uc3QgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJvYXJkLmhlaWdodClcbiAgICAgIGlmICghQm9hcmQuZ3JpZFt4XVt5XSkge1xuICAgICAgICBwb3NpdGlvbiA9IG5ldyBQb3NpdGlvbih4LCB5KVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9zaXRpb25cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgaW5pdCgpOiB2b2lkIHtcbiAgICBCb2FyZC5oZWlnaHQgPSBDYW52YXMuaGVpZ2h0IC8gQm9hcmQuYmxvY2tTaXplXG4gICAgQm9hcmQud2lkdGggPSBDYW52YXMud2lkdGggLyBCb2FyZC5ibG9ja1NpemVcblxuICAgIEJvYXJkLmdyaWQgPSBuZXcgQXJyYXkoQm9hcmQud2lkdGgpXG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBCb2FyZC53aWR0aDsgaSAhPT0gajsgaSsrKSB7XG4gICAgICBCb2FyZC5ncmlkW2ldID0gbmV3IEFycmF5KEJvYXJkLmhlaWdodClcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGRyYXcoKTogdm9pZCB7XG4gICAgQ2FudmFzLmZpbGwoQm9hcmQuYmdDb2xvcilcbiAgICBmb3IgKGxldCBjeCA9IDA7IGN4IDwgQm9hcmQud2lkdGg7IGN4KyspIHtcbiAgICAgIGZvciAobGV0IGN5ID0gMDsgY3kgPCBCb2FyZC5oZWlnaHQ7IGN5KyspIHtcbiAgICAgICAgaWYgKEJvYXJkLmdyaWRbY3hdW2N5XSkge1xuICAgICAgICAgIEJvYXJkLmdyaWRbY3hdW2N5XS5kcmF3KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgRGlyZWN0aW9uLCBHYW1lS2V5IH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnXG5pbXBvcnQgR2FtZSBmcm9tICcuLi9nYW1lJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9scyB7XG4gIHB1YmxpYyBzdGF0aWMgbGFzdEtleTogbnVtYmVyID0gbnVsbFxuXG4gIHB1YmxpYyBzdGF0aWMgb25LZXlVcCA9IChldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQgPT4geyBDb250cm9scy5sYXN0S2V5ID0gZXYua2V5Q29kZSB9XG5cbiAgcHVibGljIHN0YXRpYyBwcm9jZXNzSW5wdXQoKTogdm9pZCB7XG4gICAgaWYgKCFDb250cm9scy5sYXN0S2V5IHx8ICFHYW1lLnBsYXllcikgcmV0dXJuXG5cbiAgICBzd2l0Y2ggKENvbnRyb2xzLmxhc3RLZXkpIHtcbiAgICAgIGNhc2UgR2FtZUtleS5XOlxuICAgICAgY2FzZSBHYW1lS2V5LlVQOlxuICAgICAgICBpZiAoR2FtZS5wbGF5ZXIuZGlyZWN0aW9uICE9PSBEaXJlY3Rpb24uRE9XTikge1xuICAgICAgICAgIC8vIEdhbWUucGxheWVyLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5VUFxuICAgICAgICAgIEdhbWUudXNlci5hcGkuY29udHJvbCh7IGRpcmVjdGlvbjogRGlyZWN0aW9uLlVQIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgR2FtZUtleS5TOlxuICAgICAgY2FzZSBHYW1lS2V5LkRPV046XG4gICAgICAgIGlmIChHYW1lLnBsYXllci5kaXJlY3Rpb24gIT09IERpcmVjdGlvbi5VUCkge1xuICAgICAgICAgIC8vIEdhbWUucGxheWVyLmRpcmVjdGlvbiA9IERpcmVjdGlvbi5ET1dOXG4gICAgICAgICAgR2FtZS51c2VyLmFwaS5jb250cm9sKHsgZGlyZWN0aW9uOiBEaXJlY3Rpb24uRE9XTiB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIEdhbWVLZXkuQTpcbiAgICAgIGNhc2UgR2FtZUtleS5MRUZUOlxuICAgICAgICBpZiAoR2FtZS5wbGF5ZXIuZGlyZWN0aW9uICE9PSBEaXJlY3Rpb24uUklHSFQpIHtcbiAgICAgICAgICAvLyBHYW1lLnBsYXllci5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uTEVGVFxuICAgICAgICAgIEdhbWUudXNlci5hcGkuY29udHJvbCh7IGRpcmVjdGlvbjogRGlyZWN0aW9uLkxFRlQgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBHYW1lS2V5LkQ6XG4gICAgICBjYXNlIEdhbWVLZXkuUklHSFQ6XG4gICAgICAgIGlmIChHYW1lLnBsYXllci5kaXJlY3Rpb24gIT09IERpcmVjdGlvbi5MRUZUKSB7XG4gICAgICAgICAgLy8gR2FtZS5wbGF5ZXIuZGlyZWN0aW9uID0gRGlyZWN0aW9uLlJJR0hUXG4gICAgICAgICAgR2FtZS51c2VyLmFwaS5jb250cm9sKHsgZGlyZWN0aW9uOiBEaXJlY3Rpb24uUklHSFQgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBHYW1lS2V5LlNQQUNFQkFSOlxuICAgICAgICAvLyBHYW1lLnBsYXllci5qdW1wKClcbiAgICAgICAgR2FtZS51c2VyLmFwaS5jb250cm9sKHsgc2tpbGw6IEdhbWVLZXkuU1BBQ0VCQVIgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgQ29udHJvbHMubGFzdEtleSA9IG51bGxcbiAgfVxufVxuIiwiaW1wb3J0IEdhbWUgZnJvbSAnLi4vZ2FtZSdcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi90eXBlcy9nYW1lb2JqZWN0cydcblxuaW50ZXJmYWNlIEJ1dHRvbnMge1xuICBqb2luOiBIVE1MQnV0dG9uRWxlbWVudFxuICBzZW5kOiBIVE1MQnV0dG9uRWxlbWVudFxuICBtb2RhbDogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgYXV0aDogSFRNTEJ1dHRvbkVsZW1lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR1VJIHtcbiAgcHVibGljIHN0YXRpYyBidXR0b25zOiBCdXR0b25zID0ge1xuICAgIGpvaW46IG51bGwsXG4gICAgc2VuZDogbnVsbCxcbiAgICBtb2RhbDogbnVsbCxcbiAgICBhdXRoOiBudWxsXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHVzZXJuYW1lOiBIVE1MSW5wdXRFbGVtZW50ID0gbnVsbFxuICBwdWJsaWMgc3RhdGljIHRleHRJbnB1dDogSFRNTElucHV0RWxlbWVudCA9IG51bGxcbiAgcHVibGljIHN0YXRpYyB1c2VyRmllbGQ6IEhUTUxTcGFuRWxlbWVudCA9IG51bGxcbiAgcHVibGljIHN0YXRpYyBtc2dMaXN0OiBIVE1MVUxpc3RFbGVtZW50ID0gbnVsbFxuICBwdWJsaWMgc3RhdGljIHJhbmtpbmdVbDogSFRNTFVMaXN0RWxlbWVudCA9IG51bGxcblxuICBwdWJsaWMgc3RhdGljIGluaXQoKTogdm9pZCB7XG4gICAgR1VJLmJ1dHRvbnMuam9pbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqb2luJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBHVUkuYnV0dG9ucy5zZW5kID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbmQnKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIEdVSS5idXR0b25zLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGFsJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcbiAgICBHVUkuYnV0dG9ucy5hdXRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F1dGgnKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIEdVSS51c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJykgYXMgSFRNTElucHV0RWxlbWVudFxuICAgIEdVSS51c2VyRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlcicpIGFzIEhUTUxTcGFuRWxlbWVudFxuICAgIEdVSS50ZXh0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHlwZWluZycpIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICBHVUkubXNnTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtc2ctbGlzdCcpIGFzIEhUTUxVTGlzdEVsZW1lbnRcbiAgICBHVUkucmFua2luZ1VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JhbmtpbmctdWwnKSBhcyBIVE1MVUxpc3RFbGVtZW50XG5cbiAgICAvLyBjb25zdCB1c2VyTG9jYWwgPSBHYW1lLnVzZXIuZ2V0VXNlcigpXG4gICAgLy8gaWYgKHVzZXJMb2NhbCkge1xuICAgIC8vICAgLy8gc2V0IHVzZXIgbmFtZVxuICAgIC8vICAgR1VJLmJ1dHRvbnMuam9pbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgLy8gICBHVUkudXNlckZpZWxkLmlubmVySFRNTCA9IGBIaSwgJHt1c2VyTG9jYWwubmFtZX1gXG4gICAgLy8gICBHVUkudXNlckZpZWxkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgLy8gfVxuXG4gICAgY29uc3QgdG9nZ2xlID0gKCk6IHZvaWQgPT4ge1xuICAgICAgY29uc3QgeyBkaXNwbGF5IH0gPSBHVUkuYnV0dG9ucy5tb2RhbC5zdHlsZVxuICAgICAgR1VJLmJ1dHRvbnMubW9kYWwuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXkgPT09ICdibG9jaycgPyAnbm9uZScgOiAnYmxvY2snXG4gICAgfVxuXG4gICAgLy8gam9pbiBidXR0b24gY2xpY2tlZFxuICAgIEdVSS5idXR0b25zLmpvaW4ub25jbGljayA9IHRvZ2dsZVxuXG4gICAgLy8gYXV0aCBjbGlja2VkXG4gICAgR1VJLmJ1dHRvbnMuYXV0aC5vbmNsaWNrID0gKCk6IHZvaWQgPT4ge1xuICAgICAgLy8gZG8gdGhlIGF1dGhcbiAgICAgIGNvbnN0IG5hbWUgPSBHVUkudXNlcm5hbWUudmFsdWVcbiAgICAgIEdhbWUudXNlckF1dGgobmFtZSwgKHVzZXI6IFVzZXIpID0+IHtcbiAgICAgICAgR1VJLmJ1dHRvbnMuam9pbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIEdVSS51c2VyRmllbGQuaW5uZXJIVE1MID0gYEhpLCAke25hbWV9YFxuICAgICAgICBHVUkudXNlckZpZWxkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgIHRvZ2dsZSgpXG4gICAgICAgIEdhbWUudXNlci5zZXRVc2VyKHVzZXIpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGNvbnN0IHNlbmRNc2cgPSAoKTogdm9pZCA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gR2FtZS51c2VyLmdldFVzZXIoKVxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHRvZ2dsZSgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBzZW5kIG1lc3NhZ2VcbiAgICAgIGNvbnN0IHRleHQgPSBHVUkudGV4dElucHV0LnZhbHVlLnRyaW0oKVxuICAgICAgdGV4dCAmJiBHYW1lLnVzZXIuYXBpLnR5cGVyKHRleHQpXG4gICAgICBHVUkudGV4dElucHV0LnZhbHVlID0gJydcbiAgICB9XG5cbiAgICBHVUkudGV4dElucHV0Lm9ua2V5ZG93biA9IChldnQpOiB2b2lkID0+IHtcbiAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgc2VuZE1zZygpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2VuZCBtZXNzYWdlIGJ1dHRvbiBibGlja2VkXG4gICAgR1VJLmJ1dHRvbnMuc2VuZC5vbmNsaWNrID0gc2VuZE1zZ1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBsb2FkQ2hhdE1lc3NhZ2UoZGF0YTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgeyBuYW1lLCBtc2csIGRhdGUgfSA9IGRhdGFcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJylcbiAgICBjb25zdCBkID0gbmV3IERhdGUoZGF0ZSlcbiAgICBjb25zdCB0aW1lID0gYCR7ZC5nZXRGdWxsWWVhcigpfS0ke2QuZ2V0TW9udGgoKSArIDF9LSR7ZC5nZXREYXRlKCl9ICR7ZC5nZXRIb3VycygpfToke2QuZ2V0TWludXRlcygpfToke2QuZ2V0U2Vjb25kcygpfWBcbiAgICBjb25zdCB0ZXh0ID0gYDxzcGFuIGNsYXNzPVwibmlja1wiPiR7bmFtZX06PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAke21zZ31cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGltZVwiPiR7dGltZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICBgXG4gICAgbGkuaW5uZXJIVE1MID0gdGV4dFxuICAgIEdVSS5tc2dMaXN0LmFwcGVuZENoaWxkKGxpKVxuICAgIEdVSS5tc2dMaXN0LnBhcmVudEVsZW1lbnQuc2Nyb2xsVG9wID0gR1VJLm1zZ0xpc3QuY2xpZW50SGVpZ2h0XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGxvYWRSYW5raW5nTGlzdCA9IHRocm90dGxlKChkYXRhOiBhbnkpOiB2b2lkID0+IHtcbiAgICBsZXQgc2VnbWVudHMgPSAnJ1xuICAgIGRhdGEuZm9yRWFjaCgoaXQsIGlkeCkgPT4ge1xuICAgICAgc2VnbWVudHMgKz0gYDxsaSBpZD0nJHtpdC50b2tlbn0nPlxuICAgICAgICA8c3Ryb25nPiR7aWR4ICsgMX0uPC9zdHJvbmc+ICR7aXQubmFtZX0gPHNwYW4gY2xhc3M9J3BvaW50cycgc3R5bGU9J2Zsb2F0OiByaWdodDsgbWFyZ2luLXJpZ2h0OiAyMHB4Oyc+JHtpdC5wb2ludHN9PC9zcGFuPlxuICAgICAgPC9saT5gXG4gICAgfSlcbiAgICBHVUkucmFua2luZ1VsLmlubmVySFRNTCA9IHNlZ21lbnRzXG4gIH0pXG59XG5cbmZ1bmN0aW9uIHRocm90dGxlKGhhbmRsZTogRnVuY3Rpb24sIGludGVydmFsOiBudW1iZXIgPSAxMDAwKTogKGRhdGE6IGFueSkgPT4gdm9pZCB7XG4gIGxldCBsYXN0U3luY0F0ID0gRGF0ZS5ub3coKVxuICByZXR1cm4gKGRhdGE6IGFueSk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgICBpZiAobm93IC0gbGFzdFN5bmNBdCA+IGludGVydmFsKSB7XG4gICAgICBoYW5kbGUoZGF0YSlcbiAgICAgIGxhc3RTeW5jQXQgPSBub3dcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFVzZXIsIERpcmVjdGlvbiwgR2FtZUtleSB9IGZyb20gJy4uL3R5cGVzL2luZGV4J1xuaW1wb3J0IHsgUmVnaXN0ZXIgfSBmcm9tICcuLi9tc2cvbXNnJ1xuXG5leHBvcnQgZGVmYXVsdCAoY2hhbm5lbDogYW55KTogb2JqZWN0ID0+IHtcbiAgY29uc3QgYXBpcyA9IHtcbiAgICB1c2VyQXV0aChuYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIGNvbnNvbGUubG9nKCdhdXRoZW50aWNhdGlvbiA9PT0+ICcsIG5hbWUpXG4gICAgICBjb25zdCByZWc6IFJlZ2lzdGVyID0geyBSZWdpc3RlcjogeyBOYW1lOiBuYW1lIH0gfVxuICAgICAgY2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KHJlZykpXG4gICAgfSxcblxuICAgIHNldFVzZXIodXNlcjogVXNlcik6IHZvaWQge1xuICAgICAgY29uc3QgdSA9IEpTT04uc3RyaW5naWZ5KHVzZXIpXG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NuYWtlOnVzZXInLCB1KVxuICAgIH0sXG5cbiAgICBnZXRVc2VyKCk6IFVzZXIge1xuICAgICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzbmFrZTp1c2VyJykpIGFzIFVzZXJcbiAgICAgIHJldHVybiB1c2VyXG4gICAgfSxcblxuICAgIHJlbW92ZVVzZXIoKTogdm9pZCB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3NuYWtlOnVzZXInKVxuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgfSxcblxuICAgIGFwaToge1xuICAgICAgdHlwZXIodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeSh7IENoYXRNc2c6IHsgbXNnOiB0ZXh0IH0gfSkpXG4gICAgICB9LFxuXG4gICAgICBjb250cm9sKG9wOiB7IGRpcmVjdGlvbj86IERpcmVjdGlvbjsgc2tpbGw/OiBHYW1lS2V5IH0pOiB2b2lkIHtcbiAgICAgICAgY2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgR2FtZUNvbnRyb2w6IG9wIH0pKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGNvbW1vbkNoYW5uZWwub24oJ2xvZ291dCcsICh7IHRva2VuIH06IGFueSkgPT4ge1xuICAvLyAgIGNvbnN0IHVzZXIgPSBhcGlzLmdldFVzZXIoKVxuICAvLyAgIGlmICh0b2tlbiA9PT0gdXNlci50b2tlbikge1xuICAvLyAgICAgYXBpcy5yZW1vdmVVc2VyKClcbiAgLy8gICB9XG4gIC8vIH0pXG5cbiAgcmV0dXJuIGFwaXNcbn1cbiIsImltcG9ydCB7IEdhbWVPYmplY3QsIFBvc2l0aW9uIH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnXG5pbXBvcnQgeyBDYW52YXMsIEJvYXJkIH0gZnJvbSAnLi4vdXgvaW5kZXgnXG5pbXBvcnQgU25ha2UgZnJvbSAnLi9zbmFrZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29pbiBpbXBsZW1lbnRzIEdhbWVPYmplY3Qge1xuICBwdWJsaWMgc3RhdGljIHZhbHVlczogbnVtYmVyW10gPSBbMjAwLCA2MDAsIDgwMCwgMTAwMCwgMjAwMF1cbiAgcHVibGljIHN0YXRpYyBpbnN0YW5jZXM6IHsgW2luZGV4OiBudW1iZXJdOiBDb2luIH0gPSB7fVxuICBwdWJsaWMgc3RhdGljIGNvaW5zSW5kZXg6IG51bWJlciA9IDBcbiAgcHVibGljIHN0YXRpYyBjb2luc0FjdGl2ZTogbnVtYmVyID0gMFxuXG4gIHB1YmxpYyBpbmRleDogbnVtYmVyXG4gIHB1YmxpYyB2YWx1ZTogbnVtYmVyXG4gIHB1YmxpYyBwb3NpdGlvbjogUG9zaXRpb25cblxuICBwdWJsaWMgY29uc3RydWN0b3IoeyB2YWx1ZSB9OiB7IHZhbHVlOiBudW1iZXIgfSkge1xuICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxuICAgIHRoaXMuaW5kZXggPSBDb2luLmNvaW5zSW5kZXhcbiAgICArK0NvaW4uY29pbnNJbmRleFxuICAgICsrQ29pbi5jb2luc0FjdGl2ZVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVSYW5kb20oKTogQ29pbiB7XG4gICAgcmV0dXJuIG5ldyBDb2luKHtcbiAgICAgIHZhbHVlOiBDb2luLnZhbHVlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBDb2luLnZhbHVlcy5sZW5ndGgpXVxuICAgIH0pXG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ29sbGlzaW9uKHNuYWtlOiBTbmFrZSk6IHZvaWQge1xuICAgIHNuYWtlLnBvaW50cyArPSB0aGlzLnZhbHVlXG4gICAgc25ha2UubWF4TGVuZ3RoICs9IDJcbiAgICB0aGlzLmRlc3Ryb3koKVxuICB9XG5cbiAgcHVibGljIGRyYXcoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBvc2l0aW9uKSByZXR1cm5cblxuICAgIGNvbnN0IHggPSAodGhpcy5wb3NpdGlvbi5YICogQm9hcmQuYmxvY2tTaXplKSArIChCb2FyZC5ibG9ja1NpemUgLyAyKVxuICAgIGNvbnN0IHkgPSAodGhpcy5wb3NpdGlvbi5ZICogQm9hcmQuYmxvY2tTaXplKSArIChCb2FyZC5ibG9ja1NpemUgLyAyKVxuICAgIGNvbnN0IHIgPSAoQm9hcmQuYmxvY2tTaXplIC8gMikgLSAxXG5cbiAgICBDYW52YXMuY29udGV4dC5iZWdpblBhdGgoKVxuICAgIENhbnZhcy5jb250ZXh0LmFyYyh4LCB5LCByLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpXG4gICAgQ2FudmFzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnI0ZGMCdcbiAgICBDYW52YXMuY29udGV4dC5maWxsU3R5bGUgPSAnI0NDMCdcbiAgICBDYW52YXMuY29udGV4dC5zdHJva2UoKVxuICAgIENhbnZhcy5jb250ZXh0LmZpbGwoKVxuICB9XG5cbiAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgQm9hcmQucmVtb3ZlT2JqZWN0QXQodGhpcy5wb3NpdGlvbilcbiAgICBkZWxldGUgQ29pbi5pbnN0YW5jZXNbdGhpcy5pbmRleF1cbiAgICAtLUNvaW4uY29pbnNBY3RpdmVcbiAgfVxufVxuIiwiaW1wb3J0IHsgR2FtZU9iamVjdCwgUG9zaXRpb24gfSBmcm9tICcuLi90eXBlcy9pbmRleCdcbmltcG9ydCB7IENhbnZhcywgQm9hcmQgfSBmcm9tICcuLi91eC9pbmRleCdcbmltcG9ydCBTbmFrZSBmcm9tICcuL3NuYWtlJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbmFrZVNlZ21lbnQgaW1wbGVtZW50cyBHYW1lT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBjb2xvcnM6IHN0cmluZ1tdID0gW1xuICAgICcjRkYwMDAwJywgJyNGRjk5NjYnLFxuICAgICcjRkZGQTY2JywgJyM2NkZGNjYnLFxuICAgICcjNjZGRkZEJywgJyM2Njk5RkYnLFxuICAgICcjNzk2NkZGJywgJyNGMzY2RkYnXG4gIF1cblxuICBwdWJsaWMgcG9zaXRpb246IFBvc2l0aW9uXG4gIHB1YmxpYyBjb2xvckluZGV4OiBudW1iZXIgPSAtMVxuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogUG9zaXRpb24pIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb25cbiAgfVxuXG4gIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xuICAgIGNvbnN0IHN4ID0gKHRoaXMucG9zaXRpb24uWCAqIEJvYXJkLmJsb2NrU2l6ZSlcbiAgICBjb25zdCBzeSA9ICh0aGlzLnBvc2l0aW9uLlkgKiBCb2FyZC5ibG9ja1NpemUpXG4gICAgY29uc3Qgc2l6ZSA9IEJvYXJkLmJsb2NrU2l6ZVxuXG4gICAgQ2FudmFzLmZpbGxSZWN0KHN4LCBzeSwgc2l6ZSwgc2l6ZSwgdGhpcy5nZXRDb2xvcigpKVxuICB9XG5cbiAgcHVibGljIGdldENvbG9yKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbGVuOiBudW1iZXIgPSBTbmFrZVNlZ21lbnQuY29sb3JzLmxlbmd0aFxuICAgIHRoaXMuY29sb3JJbmRleCsrXG4gICAgcmV0dXJuIFNuYWtlU2VnbWVudC5jb2xvcnNbdGhpcy5jb2xvckluZGV4ICUgbGVuXVxuICB9XG5cbiAgcHVibGljIGhhbmRsZUNvbGxpc2lvbihzbmFrZTogU25ha2UpOiB2b2lkIHtcbiAgICBzbmFrZS5kaWUoKVxuICB9XG59XG4iLCJpbXBvcnQgR2FtZSBmcm9tICcuLi9nYW1lJ1xuaW1wb3J0IFNuYWtlU2VnbWVudCBmcm9tICcuL3NuYWtlU2VnbWVudCdcbmltcG9ydCB7IEJvYXJkIH0gZnJvbSAnLi4vdXgvaW5kZXgnXG5pbXBvcnQge1xuICBTcGVlZCxcbiAgRGlyZWN0aW9uLFxuICBQb3NpdGlvbixcbiAgU2NyZWVuRWRnZSxcbiAgQ2xvY2tUaWNrLFxuICBQbGF5ZXJPYmplY3QsXG4gIEdhbWVPYmplY3Rcbn0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNuYWtlIGV4dGVuZHMgU25ha2VTZWdtZW50IGltcGxlbWVudHMgUGxheWVyT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBkZWZhdWx0TGVuZ3RoID0gM1xuICBwdWJsaWMganVtcERpc3RhbmNlOiBudW1iZXIgPSA4XG5cbiAgcHVibGljIHNraXBOZXh0VHVybjogYm9vbGVhbiA9IGZhbHNlXG4gIHB1YmxpYyBoaXREZXRlY3RlZDogYm9vbGVhbiA9IGZhbHNlXG4gIHB1YmxpYyBpc0FsaXZlOiBib29sZWFuID0gZmFsc2VcblxuICBwdWJsaWMgc3BlZWQ6IFNwZWVkID0gU3BlZWQuU0xPV1xuICBwdWJsaWMgZGlyZWN0aW9uOiBEaXJlY3Rpb24gPSBEaXJlY3Rpb24uTk9ORVxuICBwdWJsaWMgcG9zaXRpb246IFBvc2l0aW9uXG5cbiAgcHVibGljIGhpU2NvcmU6IG51bWJlciA9IDBcbiAgcHVibGljIHBvaW50czogbnVtYmVyID0gMFxuICBwdWJsaWMgbGl2ZXM6IG51bWJlciA9IDk5OVxuXG4gIHB1YmxpYyBuYW1lOiBzdHJpbmdcbiAgcHVibGljIHNlZ21lbnRzOiBTbmFrZVNlZ21lbnRbXSA9IFtdXG4gIHB1YmxpYyBtYXhMZW5ndGg6IG51bWJlciA9IFNuYWtlLmRlZmF1bHRMZW5ndGhcbiAgcHVibGljIHRva2VuOiBzdHJpbmdcblxuICBjb25zdHJ1Y3Rvcih7IHBvc2l0aW9uLCBzZWdtZW50cywgc3BlZWQsIG1heExlbmd0aCwgZGlyZWN0aW9uLCB0b2tlbiwgbmFtZSwgcG9pbnRzIH06IHtcbiAgICBuYW1lOiBzdHJpbmdcbiAgICB0b2tlbjogc3RyaW5nXG4gICAgcG9zaXRpb246IFBvc2l0aW9uXG4gICAgcG9pbnRzOiBudW1iZXJcbiAgICBzZWdtZW50czogW1NuYWtlU2VnbWVudF1cbiAgICBtYXhMZW5ndGg/OiBudW1iZXJcbiAgICBzcGVlZD86IFNwZWVkXG4gICAgZGlyZWN0aW9uPzogRGlyZWN0aW9uXG4gIH0pIHtcbiAgICBzdXBlcihwb3NpdGlvbilcbiAgICB0aGlzLnNlZ21lbnRzWzBdID0gdGhpc1xuICAgIHRoaXMuaXNBbGl2ZSA9IHRydWVcbiAgICB0aGlzLm5hbWUgPSBuYW1lXG4gICAgdGhpcy5tYXhMZW5ndGggPSBtYXhMZW5ndGhcbiAgICB0aGlzLnNwZWVkID0gc3BlZWRcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvblxuICAgIHRoaXMudG9rZW4gPSB0b2tlblxuICAgIHRoaXMucG9pbnRzID0gcG9pbnRzXG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIEJvYXJkLnBsYWNlT2JqZWN0KHRoaXMsIHBvc2l0aW9uKVxuICAgICAgaWYgKHNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgICBzZWdtZW50cy5mb3JFYWNoKCh7IHBvc2l0aW9uOiBwb3MgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IG5ldyBQb3NpdGlvbihwb3MuWCwgcG9zLlkpXG4gICAgICAgICAgY29uc3QgbmV3U2VnbWVudCA9IG5ldyBTbmFrZVNlZ21lbnQobmV3UG9zKVxuICAgICAgICAgIHRoaXMuc2VnbWVudHMucHVzaChuZXdTZWdtZW50KVxuICAgICAgICAgIEJvYXJkLnBsYWNlT2JqZWN0KG5ld1NlZ21lbnQsIG5ld1BvcylcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMganVtcCgpOiB2b2lkIHtcbiAgICBjb25zdCBwb3NpdGlvbjogUG9zaXRpb24gPSBQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pXG5cbiAgICBzd2l0Y2ggKHRoaXMuZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlIERpcmVjdGlvbi5VUDpcbiAgICAgICAgcG9zaXRpb24uWSAtPSB0aGlzLmp1bXBEaXN0YW5jZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBEaXJlY3Rpb24uRE9XTjpcbiAgICAgICAgcG9zaXRpb24uWSArPSB0aGlzLmp1bXBEaXN0YW5jZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBEaXJlY3Rpb24uTEVGVDpcbiAgICAgICAgcG9zaXRpb24uWCAtPSB0aGlzLmp1bXBEaXN0YW5jZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBEaXJlY3Rpb24uUklHSFQ6XG4gICAgICAgIHBvc2l0aW9uLlggKz0gdGhpcy5qdW1wRGlzdGFuY2VcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUubG9nKCd1bmtub3duIGRpcmVjdGlvbiAnLCB0aGlzLmRpcmVjdGlvbilcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUJvYXJkKHBvc2l0aW9uKVxuICB9XG5cbiAgcHVibGljIG9uSGl0U2NyZWVuRWRnZShlZGdlOiBTY3JlZW5FZGdlKTogdm9pZCB7XG4gICAgLy8gc3dpdGNoIChlZGdlKSB7XG4gICAgLy8gICBjYXNlIFNjcmVlbkVkZ2UuTk9SVEg6XG4gICAgLy8gICBjYXNlIFNjcmVlbkVkZ2UuU09VVEg6XG4gICAgLy8gICBjYXNlIFNjcmVlbkVkZ2UuRUFTVDpcbiAgICAvLyAgIGNhc2UgU2NyZWVuRWRnZS5XRVNUOlxuICAgIC8vIH1cbiAgfVxuXG4gIHB1YmxpYyBkaWUoKTogdm9pZCB7XG4gICAgdGhpcy5oaXREZXRlY3RlZCA9IHRydWVcbiAgICB0aGlzLmhpU2NvcmUgPSB0aGlzLnBvaW50cyA+IHRoaXMuaGlTY29yZSA/IHRoaXMucG9pbnRzIDogdGhpcy5oaVNjb3JlXG4gICAgR2FtZS5oaVNjb3JlID0gdGhpcy5oaVNjb3JlID4gR2FtZS5oaVNjb3JlID8gdGhpcy5oaVNjb3JlIDogR2FtZS5oaVNjb3JlXG5cbiAgICBpZiAoIXRoaXMubGl2ZXMpIHtcbiAgICAgIHRoaXMuaXNBbGl2ZSA9IGZhbHNlXG4gICAgICBHYW1lLnJlc2V0KClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC0tdGhpcy5saXZlc1xuICAgIHRoaXMuZGVzdHJveSgpXG5cbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFBvc2l0aW9uKDAsIDApXG4gICAgdGhpcy5kaXJlY3Rpb24gPSBEaXJlY3Rpb24uTk9ORVxuICB9XG5cbiAgcHVibGljIHNldFNwZWVkKHNwZWVkOiBTcGVlZCk6IHZvaWQge1xuICAgIHRoaXMuc3BlZWQgPSBzcGVlZFxuICAgIHRoaXMuc2tpcE5leHRUdXJuID0gKHNwZWVkID09PSBTcGVlZC5TTE9XKVxuICB9XG5cbiAgcHVibGljIHByb2Nlc3NUdXJuKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc0FsaXZlKSByZXR1cm5cbiAgICBjb25zdCBwb3M6IFBvc2l0aW9uID0gUG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKVxuICAgIHRoaXMudXBkYXRlQm9hcmQocG9zKVxuICB9XG5cbiAgcHVibGljIHVwZGF0ZUJvYXJkKHBvczogUG9zaXRpb24pOiB2b2lkIHtcbiAgICAvLyBkbyBub3RoaW5nXG4gIH1cblxuICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMCwgcyA9IHRoaXMuc2VnbWVudHMubGVuZ3RoOyBpICE9PSBzOyBpKyspIHtcbiAgICAgIEJvYXJkLnJlbW92ZU9iamVjdEF0KHRoaXMuc2VnbWVudHNbaV0ucG9zaXRpb24pXG4gICAgfVxuXG4gICAgdGhpcy5zZWdtZW50cyA9IFt0aGlzXVxuICAgIHRoaXMubWF4TGVuZ3RoID0gdGhpcy5tYXhMZW5ndGhcbiAgfVxufVxuIiwiaW1wb3J0IHsgQm9hcmQsIENhbnZhcyB9IGZyb20gJy4uL3V4L2luZGV4J1xuaW1wb3J0IHsgU3BlZWQsIFBvc2l0aW9uIH0gZnJvbSAnLi4vdHlwZXMvaW5kZXgnXG5pbXBvcnQgQ29pbiBmcm9tICcuL2NvaW4nXG5pbXBvcnQgU25ha2UgZnJvbSAnLi9zbmFrZSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3BlZWRDb2luIHtcbiAgcHVibGljIHN0YXRpYyBjb2xvcnM6IHN0cmluZ1tdID0gWycjMzM2NkZGJywgJyNGRjE0MDAnXVxuICBwdWJsaWMgc3RhdGljIGluc3RhbmNlczogeyBbaW5kZXg6IG51bWJlcl06IENvaW4gfSA9IHt9XG4gIHB1YmxpYyBzdGF0aWMgaXRlbXNJbmRleDogbnVtYmVyID0gMFxuICBwdWJsaWMgc3RhdGljIGl0ZW1zQWN0aXZlOiBudW1iZXIgPSAwXG5cbiAgcHVibGljIGluZGV4OiBudW1iZXJcbiAgcHVibGljIGNvbG9yOiBzdHJpbmdcbiAgcHVibGljIHNwZWVkOiBTcGVlZFxuICBwdWJsaWMgcG9zaXRpb246IFBvc2l0aW9uXG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHsgc3BlZWQgfTogeyBzcGVlZDogU3BlZWQgfSkge1xuICAgIHRoaXMuc3BlZWQgPSBzcGVlZFxuICAgIHRoaXMuY29sb3IgPSBTcGVlZENvaW4uY29sb3JzW3RoaXMuc3BlZWRdXG4gICAgdGhpcy5pbmRleCA9IFNwZWVkQ29pbi5pdGVtc0luZGV4XG4gICAgKytTcGVlZENvaW4uaXRlbXNJbmRleFxuICAgICsrU3BlZWRDb2luLml0ZW1zQWN0aXZlXG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQ29sbGlzaW9uKHNuYWtlOiBTbmFrZSk6IHZvaWQge1xuICAgIHNuYWtlLnNldFNwZWVkKHRoaXMuc3BlZWQpXG4gICAgdGhpcy5kZXN0cm95KClcbiAgfVxuXG4gIHB1YmxpYyBkcmF3KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wb3NpdGlvbikgcmV0dXJuXG5cbiAgICBjb25zdCB4ID0gKHRoaXMucG9zaXRpb24uWCAqIEJvYXJkLmJsb2NrU2l6ZSkgKyAyXG4gICAgY29uc3QgeSA9ICh0aGlzLnBvc2l0aW9uLlkgKiBCb2FyZC5ibG9ja1NpemUpICsgMlxuICAgIGNvbnN0IHNpemUgPSBCb2FyZC5ibG9ja1NpemUgLSA0XG5cbiAgICBDYW52YXMuZHJhd1JlY3QoeCwgeSwgc2l6ZSwgc2l6ZSwgdGhpcy5jb2xvcilcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xuICAgIEJvYXJkLnJlbW92ZU9iamVjdEF0KHRoaXMucG9zaXRpb24pXG4gICAgZGVsZXRlIFNwZWVkQ29pbi5pbnN0YW5jZXNbdGhpcy5pbmRleF1cbiAgICAtLVNwZWVkQ29pbi5pdGVtc0FjdGl2ZVxuICB9XG59XG4iLCJpbXBvcnQgJy4vYXNzZXRzL2Nzcy9zdHlsZS5jc3MnXG5pbXBvcnQgeyBUaW1lciwgRGlyZWN0aW9uLCBTcGVlZCwgUG9zaXRpb24sIFVzZXIgYXMgVXNlclR5cGUsIFJhbmtpbmdJdGVtIH0gZnJvbSAnLi90eXBlcy9pbmRleCdcbmltcG9ydCB7IENvaW4sIFNuYWtlLCBTcGVlZENvaW4gfSBmcm9tICcuL29iamVjdHMvaW5kZXgnXG5pbXBvcnQgeyBCb2FyZCwgQ2FudmFzLCBDb250cm9scywgR1VJLCBVc2VyIH0gZnJvbSAnLi91eC9pbmRleCdcbmltcG9ydCB7IFJlZ2lzdGVyLCBSZWdpc3RlclJlc3AsIERhdGFTeW5jIH0gZnJvbSAnLi9tc2cvbXNnJ1xuXG5lbnVtIEdhbWVEaWZmaWN1bHR5IHsgRUFTWSA9IDMwMCwgTUVESVVNID0gMTUwLCBESUZGSUNVTFQgPSA1MCB9XG5cbmxldCBhZGRyZXNzID0gJ3dzOi8vbG9jYWxob3N0OjM2NTMnXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICBhZGRyZXNzID0gJ3dzOi8vbG9jYWxob3N0OjM2NTMnXG59XG5jb25zb2xlLmxvZygnZW52ICcsIHByb2Nlc3MuZW52Lk5PREVfRU5WLCBhZGRyZXNzKVxuXG5jb25zdCByYW5raW5nTGlzdCA9IChwbGF5ZXJzOiBTbmFrZVtdKTogUmFua2luZ0l0ZW1bXSA9PiB7XG4gIGNvbnN0IGxpc3QgPSBwbGF5ZXJzLm1hcCgocGxheWVyOiBTbmFrZSkgPT4gKHtcbiAgICB0b2tlbjogcGxheWVyLnRva2VuLFxuICAgIG5hbWU6IHBsYXllci5uYW1lLFxuICAgIHBvaW50czogcGxheWVyLnBvaW50c1xuICB9KSlcbiAgcmV0dXJuIGxpc3Quc29ydCgoYTogUmFua2luZ0l0ZW0sIGI6IFJhbmtpbmdJdGVtKTogbnVtYmVyID0+IChiLnBvaW50cyAtIGEucG9pbnRzKSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIHB1YmxpYyBzdGF0aWMgY2xvY2s6IFRpbWVyXG4gIHB1YmxpYyBzdGF0aWMgcGxheWVyOiBTbmFrZVxuICBwdWJsaWMgc3RhdGljIHVzZXI6IGFueVxuICBwdWJsaWMgc3RhdGljIGhpU2NvcmU6IG51bWJlciA9IDBcbiAgcHVibGljIHN0YXRpYyBpc1J1bm5pbmc6IGJvb2xlYW4gPSBmYWxzZVxuICBwdWJsaWMgc3RhdGljIGNvaW5Db3VudGVyID0gMFxuICBwdWJsaWMgc3RhdGljIHBsYXllcnM6IEFycmF5PFNuYWtlPiA9IFtdXG4gIHB1YmxpYyBzdGF0aWMgc3luY0NoYW5uZWw6IGFueVxuICBwdWJsaWMgc3RhdGljIGNvbW1vbkNoYW5uZWw6IGFueVxuICBwdWJsaWMgc3RhdGljIHVzZXJDaGFubmVsOiBhbnlcbiAgcHVibGljIHN0YXRpYyBhdXRoQ2FsbGJhY2s6IEZ1bmN0aW9uIHwgbnVsbFxuXG4gIHB1YmxpYyBzdGF0aWMgaW5pdCgpOiB2b2lkIHtcbiAgICBDYW52YXMuaW5pdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKSlcblxuICAgIGNvbnN0IGJvZHk6IEhUTUxCb2R5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKVxuICAgIGJvZHkub25rZXl1cCA9IENvbnRyb2xzLm9uS2V5VXBcblxuICAgIC8vIGluaXQgc29ja2V0LmlvXG4gICAgY29uc3Qgd3M6IFdlYlNvY2tldCA9IG5ldyBXZWJTb2NrZXQoYWRkcmVzcylcbiAgICBHYW1lLnN5bmNDaGFubmVsID0gd3NcblxuICAgIHdzLm9ub3BlbiA9IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICAgIC8vIGF1dG8gbG9naW4gdXNlclxuICAgICAgR2FtZS51c2VyID0gVXNlcih3cylcbiAgICAgIEdhbWUucmVhZHkoKVxuICAgIH1cblxuICAgIHdzLm9uY2xvc2UgPSBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBpZiAoR2FtZS51c2VyKSB7XG4gICAgICAgIEdhbWUudXNlci5yZW1vdmVVc2VyKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnOiBhbnkpOiB2b2lkIHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBjb25zdCBmaWxlID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgICAgZmlsZS5yZWFkQXNUZXh0KG1zZy5kYXRhKVxuICAgICAgZmlsZS5vbmxvYWQgPSBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHRoaXMucmVzdWx0IGFzIHN0cmluZylcbiAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgY2FzZSAhIWRhdGEuUmVnaXN0ZXJSZXNwOlxuICAgICAgICAgICAgaWYgKEdhbWUuYXV0aENhbGxiYWNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgR2FtZS5hdXRoQ2FsbGJhY2soZGF0YS5SZWdpc3RlclJlc3AuZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAhIWRhdGEuRGF0YVN5bmM6XG4gICAgICAgICAgICBHYW1lLmxvYWREYXRhKGRhdGEuRGF0YVN5bmMuZGF0YU1hcClcbiAgICAgICAgICAgIEdhbWUub25DbG9ja1RpY2soKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICEhZGF0YS5DaGF0TXNnOlxuICAgICAgICAgICAgR1VJLmxvYWRDaGF0TWVzc2FnZShkYXRhLkNoYXRNc2cpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBsb2FkRGF0YShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICBkYXRhID0gSlNPTi5wYXJzZShgWyR7ZGF0YS5zbGljZSgwLCAtMSl9XWApXG5cbiAgICBCb2FyZC5pbml0KClcblxuICAgIEdhbWUucGxheWVycyA9IFtdXG4gICAgY29uc3Qgc2VnbWVudHMgPSBkYXRhLmZpbHRlcigoaXQpID0+IGl0LmNsYXp6ID09PSAnU25ha2VTZWdtZW50JylcbiAgICBkYXRhID0gZGF0YS5maWx0ZXIoKGl0KSA9PiBpdC5jbGF6eiAhPT0gJ1NuYWtlU2VnbWVudCcpXG4gICAgZGF0YS5mb3JFYWNoKChpdCkgPT4ge1xuICAgICAgY29uc3QgeyBjbGF6eiwgLi4ucGFyYW1zIH0gPSBpdFxuICAgICAgY29uc3QgRWxlbSA9IHsgQ29pbiwgU25ha2UsIFNwZWVkQ29pbiB9W2NsYXp6XVxuICAgICAgaWYgKCFFbGVtKSByZXR1cm5cbiAgICAgIGlmIChFbGVtID09PSBTbmFrZSkge1xuICAgICAgICBwYXJhbXMuc2VnbWVudHMgPSBzZWdtZW50c1xuICAgICAgfVxuICAgICAgY29uc3Qgb2JqID0gbmV3IEVsZW0ocGFyYW1zKVxuICAgICAgLy8gY29uc3QgdXNlciA9IEdhbWUudXNlci5nZXRVc2VyKClcbiAgICAgIGlmIChjbGF6eiA9PT0gJ1NuYWtlJykge1xuICAgICAgICBHYW1lLnBsYXllcnMucHVzaChvYmopXG4gICAgICAgIEdhbWUucGxheWVyID0gb2JqXG4gICAgICB9XG4gICAgICBCb2FyZC5wbGFjZU9iamVjdChvYmosIHBhcmFtcy5wb3NpdGlvbilcbiAgICB9KVxuXG4gICAgLy8gcmFua2luZyBsaXN0IGNhbGN1bGF0ZVxuICAgIEdVSS5sb2FkUmFua2luZ0xpc3QocmFua2luZ0xpc3QoR2FtZS5wbGF5ZXJzKSlcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgdXNlckF1dGgobmFtZTogc3RyaW5nLCBjYWxsYmFjazogYW55KTogdm9pZCB7XG4gICAgR2FtZS51c2VyLnVzZXJBdXRoKG5hbWUpXG4gICAgR2FtZS5hdXRoQ2FsbGJhY2sgPSBjYWxsYmFja1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVVc2VyQ2hhbm5lbCh0b2tlbjogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2codG9rZW4pXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHJlYWR5KCk6IHZvaWQge1xuICAgIEJvYXJkLmluaXQoKVxuICAgIEJvYXJkLmRyYXcoKVxuICAgIEdVSS5pbml0KClcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKEdhbWUuaXNSdW5uaW5nKSByZXR1cm5cbiAgICBpZiAoR2FtZS5jbG9jay5pc1BhdXNlZCkge1xuICAgICAgR2FtZS5wYXVzZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBHYW1lLmlzUnVubmluZyA9IHRydWVcbiAgICBHYW1lLmNsb2NrLnN0YXJ0KClcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgcGF1c2UoKTogdm9pZCB7XG4gICAgaWYgKEdhbWUuY2xvY2suaXNQYXVzZWQpIHtcbiAgICAgIEdhbWUuaXNSdW5uaW5nID0gdHJ1ZVxuICAgICAgR2FtZS5jbG9jay5yZXN1bWUoKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgR2FtZS5jbG9jay5wYXVzZSgpXG4gICAgR2FtZS5pc1J1bm5pbmcgPSBmYWxzZVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyByZXNldCgpOiB2b2lkIHtcbiAgICBHYW1lLmlzUnVubmluZyA9IGZhbHNlXG4gICAgR2FtZS5yZWFkeSgpXG4gIH1cblxuICBwdWJsaWMgc3RhdGljIG9uQ2xvY2tUaWNrKCk6IHZvaWQge1xuICAgIENvbnRyb2xzLnByb2Nlc3NJbnB1dCgpXG4gICAgR2FtZS5wbGF5ZXJzLmZvckVhY2goKHBsYXllcikgPT4gcGxheWVyLnByb2Nlc3NUdXJuKCkpXG5cbiAgICBCb2FyZC5kcmF3KClcbiAgfVxufVxuXG5HYW1lLmluaXQoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==